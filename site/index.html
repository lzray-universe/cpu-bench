<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>OpenBench Web · 浏览器 CPU 跑分</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <meta name="description" content="静态网页 CPU 跑分：单核、多核、浮点、整数、内存，约30秒完成。">
  </head>
  <body class="bg-slate-50 text-slate-800">
    <div class="max-w-5xl mx-auto p-4 md:p-8">
      <header class="mb-6">
        <h1 class="text-3xl md:text-4xl font-bold">OpenBench Web</h1>
        <p class="text-sm md:text-base text-slate-600 mt-1">静态网页 · 浏览器端 CPU 跑分（GitHub Pages）</p>
      </header>

      <section class="grid md:grid-cols-3 gap-4">
        <div class="md:col-span-2">
          <div class="p-4 bg-white rounded-2xl shadow">
            <div class="flex flex-wrap items-center gap-2">
              <button id="btn-quick" class="px-4 py-2 rounded-xl bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50">快速测试（≈30s）</button>
              <button id="btn-extended" class="px-4 py-2 rounded-xl bg-slate-700 text-white hover:bg-slate-800 disabled:opacity-50">扩展测试（≈60s）</button>
              <button id="btn-cancel" class="px-4 py-2 rounded-xl bg-rose-600 text-white hover:bg-rose-700 ml-auto hidden">取消</button>
            </div>

            <div id="status" class="mt-4 text-sm text-slate-700">就绪。</div>

            <div class="mt-4">
              <div class="w-full bg-slate-200 rounded-xl overflow-hidden">
                <div id="progress" class="h-2 bg-blue-600 w-0"></div>
              </div>
              <div class="mt-2 text-xs text-slate-500">
                <span id="eta">ETA —</span>
              </div>
            </div>

            <div class="mt-6">
              <h2 class="text-lg font-semibold">结果</h2>
              <div id="results" class="mt-2 overflow-x-auto">
                <!-- results table injected here -->
              </div>
              <div class="mt-3 flex gap-2">
                <button id="btn-copy" class="px-3 py-2 rounded-lg bg-slate-700 text-white text-sm">复制 JSON</button>
                <button id="btn-dl" class="px-3 py-2 rounded-lg bg-slate-700 text-white text-sm">下载 JSON</button>
                <button id="btn-csv" class="px-3 py-2 rounded-lg bg-slate-700 text-white text-sm">下载 CSV</button>
              </div>
            </div>
          </div>
        </div>
        <aside class="p-4 bg-white rounded-2xl shadow space-y-2">
          <h3 class="text-base font-semibold">环境与优化</h3>
          <ul class="text-sm leading-6" id="env">
            <li>架构：<span id="arch">检测中…</span></li>
            <li>逻辑核心：<span id="cores">—</span></li>
            <li>WASM：<span id="wasm">—</span></li>
            <li>SIMD：<span id="simd">—</span></li>
            <li>交叉隔离(SAB)：<span id="xoi">—</span></li>
          </ul>
          <h4 class="text-sm font-semibold mt-4">优化参数（自动）</h4>
          <ul class="text-sm leading-6" id="opts">
            <li>单核展开（float/int）：<span id="opt-unroll">—</span></li>
            <li>内存步长（stride）：<span id="opt-stride">—</span></li>
            <li>线程数（多核）：<span id="opt-threads">—</span></li>
          </ul>
          <p class="text-xs text-slate-500 mt-4">
            * 本项目使用 Web Workers 并行，无需 SharedArrayBuffer。
          </p>
        </aside>
      </section>

      <footer class="mt-8 text-xs text-slate-500">
        MIT © 2025 · 纯前端评测，仅供参考，浏览器/系统差异会影响结果。
      </footer>
    </div>
    <script type="module" src="./scripts/main.js"></script>
  </body>
</html>
