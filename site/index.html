<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>OpenBench Web · 无内联JS/CSS版</title>
  <link href="./styles.css" rel="stylesheet">
</head>
<body>
  <noscript><div class="wrap"><div class="err" style="display:block">当前浏览器禁用了 JavaScript，无法运行测试。</div></div></noscript>
  <div class="wrap">
    <div class="title">OpenBench Web</div>
    <div class="sub">无内联 JS/CSS · 浏览器端 CPU 跑分（含 Worker 受限时的降级方案）</div>

    <div class="grid">
      <div class="card pad">
        <div class="row">
          <button id="btn-quick" class="btn btn-primary">快速测试（≈30s）</button>
          <button id="btn-extended" class="btn">扩展测试（≈60s）</button>
          <span class="grow"></span>
          <button id="btn-cancel" class="btn btn-danger" style="display:none;">取消</button>
        </div>

        <div id="status" class="mt">就绪。</div>
        <div id="err" class="err"></div>
        <div id="warn" class="warn"></div>

        <div class="mt progress"><div id="progress" class="bar"></div></div>
        <div class="muted" style="font-size:12px;margin-top:6px"> <span id="eta">ETA —</span> </div>

        <div class="mt">
          <div class="tag">结果</div>
          <div id="results" class="mt" style="overflow-x:auto"></div>
          <div class="row mt">
            <button id="btn-copy" class="btn">复制 JSON</button>
            <button id="btn-dl" class="btn">下载 JSON</button>
            <button id="btn-csv" class="btn">下载 CSV</button>
          </div>
        </div>
      </div>

      <div class="card pad">
        <div style="font-weight:700;margin-bottom:6px">环境与优化</div>
        <ul class="kvs">
          <li><span>架构</span><span id="arch">检测中…</span></li>
          <li><span>逻辑核心</span><span id="cores">—</span></li>
          <li><span>WASM</span><span id="wasm">—</span></li>
          <li><span>SIMD</span><span id="simd">—</span></li>
          <li><span>交叉隔离(SAB)</span><span id="xoi">—</span></li>
        </ul>
        <div style="font-weight:700;margin:12px 0 6px">优化参数（自动）</div>
        <ul class="kvs">
          <li><span>单核展开（float/int）</span><span id="opt-unroll">—</span></li>
          <li><span>内存步长（stride）</span><span id="opt-stride">—</span></li>
          <li><span>线程数（多核）</span><span id="opt-threads">—</span></li>
        </ul>
        <div class="foot mt">* 若浏览器/CSP 禁止 <code>blob:</code> worker，将自动降级为**单线程**模式并给出提示。</div>
      </div>
    </div>

    <div class="foot">MIT © 2025 · 本地计算不上传数据。若“点击无反应”，请查看上方红框错误信息。</div>
  </div>

  <script src="./app.js" defer></script>
</body>
</html>
